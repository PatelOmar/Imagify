{"ast":null,"code":"import _regeneratorRuntime from\"/Users/omarp/workspace/Shopify_Image_Repo_Challenge/Imagify/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/omarp/workspace/Shopify_Image_Repo_Challenge/Imagify/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import firebase from'firebase/app';import'firebase/firestore';import'firebase/auth';import\"firebase/storage\";import{useAuthState}from'react-firebase-hooks/auth';import{useCollectionData}from'react-firebase-hooks/firestore';require('dotenv').config();var firebaseConfig={apiKey:process.env.REACT_APP_APIKEY,authDomain:process.env.REACT_APP_AUTHDOMAIN,projectId:process.env.REACT_APP_PORJECTID,storageBucket:process.env.REACT_APP_STORAGEBUCKET,messagingSenderId:process.env.REACT_APP_MESSAGINGSENDERID,appId:process.env.REACT_APP_APPID,measurementId:process.env.REACT_APP_MEASUREMENTID};firebase.initializeApp(firebaseConfig);export var db=firebase.firestore();export var auth=firebase.auth();export var storage=firebase.storage();export var authSignIn=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var provider;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:provider=new firebase.auth.GoogleAuthProvider();auth.signInWithPopup(provider);case 2:case\"end\":return _context.stop();}}},_callee);}));return function authSignIn(){return _ref.apply(this,arguments);};}();export var uploadImage=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(url){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return db.collection('images').add({url:url,uid:auth.currentUser.uid,publicPermission:false});case 3:return _context2.abrupt(\"return\",true);case 6:_context2.prev=6;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);return _context2.abrupt(\"return\",false);case 10:case\"end\":return _context2.stop();}}},_callee2,null,[[0,6]]);}));return function uploadImage(_x){return _ref2.apply(this,arguments);};}();export var updateImagePermission=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id,permission){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;console.log(permission);_context3.next=4;return db.collection('images').doc(id).update({publicPermission:permission});case 4:return _context3.abrupt(\"return\",true);case 7:_context3.prev=7;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0);return _context3.abrupt(\"return\",false);case 11:case\"end\":return _context3.stop();}}},_callee3,null,[[0,7]]);}));return function updateImagePermission(_x2,_x3){return _ref3.apply(this,arguments);};}();","map":{"version":3,"sources":["/Users/omarp/workspace/Shopify_Image_Repo_Challenge/Imagify/src/firebase/firestore.js"],"names":["firebase","useAuthState","useCollectionData","require","config","firebaseConfig","apiKey","process","env","REACT_APP_APIKEY","authDomain","REACT_APP_AUTHDOMAIN","projectId","REACT_APP_PORJECTID","storageBucket","REACT_APP_STORAGEBUCKET","messagingSenderId","REACT_APP_MESSAGINGSENDERID","appId","REACT_APP_APPID","measurementId","REACT_APP_MEASUREMENTID","initializeApp","db","firestore","auth","storage","authSignIn","provider","GoogleAuthProvider","signInWithPopup","uploadImage","url","collection","add","uid","currentUser","publicPermission","console","log","updateImagePermission","id","permission","doc","update"],"mappings":"iWAAA,MAAOA,CAAAA,QAAP,KAAqB,cAArB,CACA,MAAO,oBAAP,CACA,MAAO,eAAP,CACA,MAAO,kBAAP,CACA,OAASC,YAAT,KAA6B,2BAA7B,CACA,OAASC,iBAAT,KAAkC,gCAAlC,CACAC,OAAO,CAAC,QAAD,CAAP,CAAkBC,MAAlB,GAEA,GAAMC,CAAAA,cAAc,CAAG,CACnBC,MAAM,CAAEC,OAAO,CAACC,GAAR,CAAYC,gBADD,CAEnBC,UAAU,CAAEH,OAAO,CAACC,GAAR,CAAYG,oBAFL,CAGnBC,SAAS,CAAEL,OAAO,CAACC,GAAR,CAAYK,mBAHJ,CAInBC,aAAa,CAAEP,OAAO,CAACC,GAAR,CAAYO,uBAJR,CAKnBC,iBAAiB,CAAET,OAAO,CAACC,GAAR,CAAYS,2BALZ,CAMnBC,KAAK,CAAEX,OAAO,CAACC,GAAR,CAAYW,eANA,CAOnBC,aAAa,CAAEb,OAAO,CAACC,GAAR,CAAYa,uBAPR,CAAvB,CAUArB,QAAQ,CAACsB,aAAT,CAAuBjB,cAAvB,EAEA,MAAO,IAAMkB,CAAAA,EAAE,CAAGvB,QAAQ,CAACwB,SAAT,EAAX,CACP,MAAO,IAAMC,CAAAA,IAAI,CAAGzB,QAAQ,CAACyB,IAAT,EAAb,CACP,MAAO,IAAMC,CAAAA,OAAO,CAAG1B,QAAQ,CAAC0B,OAAT,EAAhB,CAEP,MAAO,IAAMC,CAAAA,UAAU,0FAAG,gJAChBC,QADgB,CACL,GAAI5B,CAAAA,QAAQ,CAACyB,IAAT,CAAcI,kBAAlB,EADK,CAEtBJ,IAAI,CAACK,eAAL,CAAqBF,QAArB,EAFsB,sDAAH,kBAAVD,CAAAA,UAAU,0CAAhB,CAKP,MAAO,IAAMI,CAAAA,WAAW,2FAAG,kBAAOC,GAAP,8JAEbT,CAAAA,EAAE,CAACU,UAAH,CAAc,QAAd,EAAwBC,GAAxB,CAA4B,CAC9BF,GAAG,CAAEA,GADyB,CAE9BG,GAAG,CAAEV,IAAI,CAACW,WAAL,CAAiBD,GAFQ,CAG9BE,gBAAgB,CAAE,KAHY,CAA5B,CAFa,yCAQZ,IARY,6DAUnBC,OAAO,CAACC,GAAR,eAVmB,iCAWZ,KAXY,wEAAH,kBAAXR,CAAAA,WAAW,6CAAjB,CAeP,MAAO,IAAMS,CAAAA,qBAAqB,2FAAG,kBAAOC,EAAP,CAAWC,UAAX,uIAE7BJ,OAAO,CAACC,GAAR,CAAYG,UAAZ,EAF6B,uBAGvBnB,CAAAA,EAAE,CAACU,UAAH,CAAc,QAAd,EAAwBU,GAAxB,CAA4BF,EAA5B,EAAgCG,MAAhC,CAAuC,CACzCP,gBAAgB,CAAEK,UADuB,CAAvC,CAHuB,yCAOtB,IAPsB,6DAS7BJ,OAAO,CAACC,GAAR,eAT6B,iCAUtB,KAVsB,wEAAH,kBAArBC,CAAAA,qBAAqB,kDAA3B","sourcesContent":["import firebase from 'firebase/app';\nimport 'firebase/firestore';\nimport 'firebase/auth';\nimport \"firebase/storage\";\nimport { useAuthState } from 'react-firebase-hooks/auth';\nimport { useCollectionData } from 'react-firebase-hooks/firestore';\nrequire('dotenv').config();\n\nconst firebaseConfig = {\n    apiKey: process.env.REACT_APP_APIKEY,\n    authDomain: process.env.REACT_APP_AUTHDOMAIN,\n    projectId: process.env.REACT_APP_PORJECTID,\n    storageBucket: process.env.REACT_APP_STORAGEBUCKET,\n    messagingSenderId: process.env.REACT_APP_MESSAGINGSENDERID,\n    appId: process.env.REACT_APP_APPID,\n    measurementId: process.env.REACT_APP_MEASUREMENTID\n  };\n\nfirebase.initializeApp(firebaseConfig);\n\nexport const db = firebase.firestore();\nexport const auth = firebase.auth();\nexport const storage = firebase.storage();\n\nexport const authSignIn = async () => {\n    const provider = new firebase.auth.GoogleAuthProvider();\n    auth.signInWithPopup(provider);\n}\n\nexport const uploadImage = async (url) => {\n    try{\n        await db.collection('images').add({\n            url: url,\n            uid: auth.currentUser.uid,\n            publicPermission: false,\n        });\n        \n        return true;\n    } catch (err){\n        console.log(err);\n        return false;\n    }\n}\n\nexport const updateImagePermission = async (id, permission) => {\n    try{\n        console.log(permission);\n        await db.collection('images').doc(id).update({\n            publicPermission: permission,\n        });\n        \n        return true;\n    } catch (err){\n        console.log(err);\n        return false;\n    }\n}"]},"metadata":{},"sourceType":"module"}