{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"/Users/omarp/workspace/Shopify_Image_Repo_Challenge/Imagify/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/omarp/workspace/Shopify_Image_Repo_Challenge/Imagify/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/omarp/workspace/Shopify_Image_Repo_Challenge/Imagify/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useRef,useEffect}from\"react\";import Button from'react-bootstrap/Button';import{useHistory}from\"react-router-dom\";import*as FirestoreService from'../firebase/firestore';import Form from'react-bootstrap/Form';import imageCompression from'browser-image-compression';// import { useAuthState } from 'react-firebase-hooks/auth';\nimport{useCollectionData}from'react-firebase-hooks/firestore';import DropdownButton from'react-bootstrap/DropdownButton';import Dropdown from'react-bootstrap/Dropdown';// import SignIn from \"./SignIn\";\nexport default function Image(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),clickDisabled=_useState2[0],setClickDisabled=_useState2[1];var _useState3=useState(props.permission),_useState4=_slicedToArray(_useState3,2),permissionValue=_useState4[0],setPermissionValue=_useState4[1];var handleSelect=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(eventKey){var permission,toggleValue,updateProgress;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setClickDisabled(true);permission=false;toggleValue=\"Private\";if(eventKey===\"false\"){permission=false;toggleValue=\"Private\";}else{permission=true;toggleValue=\"Public\";}_context.next=6;return FirestoreService.updateImagePermission(props.id,permission);case 6:updateProgress=_context.sent;if(updateProgress){setPermissionValue(toggleValue);console.log(\"Successful!\");}else{console.log(\"Not Successful!\");}setTimeout(function(){setClickDisabled(false);},5000);case 9:case\"end\":return _context.stop();}}},_callee);}));return function handleSelect(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"section\",{className:\"Image-Card\",children:[/*#__PURE__*/_jsx(\"img\",{src:props.url,height:300,width:300}),/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Permissions:\"}),/*#__PURE__*/_jsxs(Dropdown,{onSelect:handleSelect,children:[/*#__PURE__*/_jsx(Dropdown.Toggle,{disabled:clickDisabled,children:permissionValue}),/*#__PURE__*/_jsxs(Dropdown.Menu,{children:[/*#__PURE__*/_jsx(Dropdown.Item,{eventKey:\"true\",children:\"Public\"}),/*#__PURE__*/_jsx(Dropdown.Item,{eventKey:\"false\",children:\"Private\"})]})]})]})]});}","map":{"version":3,"sources":["/Users/omarp/workspace/Shopify_Image_Repo_Challenge/Imagify/src/components/Image.js"],"names":["React","useState","useRef","useEffect","Button","useHistory","FirestoreService","Form","imageCompression","useCollectionData","DropdownButton","Dropdown","Image","props","clickDisabled","setClickDisabled","permission","permissionValue","setPermissionValue","handleSelect","eventKey","toggleValue","updateImagePermission","id","updateProgress","console","log","setTimeout","url"],"mappings":"2mBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,MAA1B,CAAkCC,SAAlC,KAAkD,OAAlD,CACA,MAAOC,CAAAA,MAAP,KAAmB,wBAAnB,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,MAAO,GAAKC,CAAAA,gBAAZ,KAAkC,uBAAlC,CACA,MAAOC,CAAAA,IAAP,KAAiB,sBAAjB,CACA,MAAOC,CAAAA,gBAAP,KAA6B,2BAA7B,CACA;AACA,OAASC,iBAAT,KAAkC,gCAAlC,CACA,MAAOC,CAAAA,cAAP,KAA2B,gCAA3B,CACA,MAAOC,CAAAA,QAAP,KAAqB,0BAArB,CAEA;AAEA,cAAe,SAASC,CAAAA,KAAT,CAAeC,KAAf,CAAsB,eACSZ,QAAQ,CAAC,KAAD,CADjB,wCAC1Ba,aAD0B,eACXC,gBADW,8BAEad,QAAQ,CAACY,KAAK,CAACG,UAAP,CAFrB,yCAE1BC,eAF0B,eAETC,kBAFS,eAGjC,GAAMC,CAAAA,YAAY,0FAAG,iBAAMC,QAAN,4JACjBL,gBAAgB,CAAC,IAAD,CAAhB,CACIC,UAFa,CAEA,KAFA,CAGbK,WAHa,CAGC,SAHD,CAIjB,GAAGD,QAAQ,GAAK,OAAhB,CAAwB,CACpBJ,UAAU,CAAG,KAAb,CACAK,WAAW,CAAG,SAAd,CACH,CAHD,IAGO,CACHL,UAAU,CAAG,IAAb,CACAK,WAAW,CAAG,QAAd,CACH,CAVgB,sBAWUf,CAAAA,gBAAgB,CAACgB,qBAAjB,CAAuCT,KAAK,CAACU,EAA7C,CAAiDP,UAAjD,CAXV,QAWbQ,cAXa,eAYjB,GAAGA,cAAH,CAAkB,CACdN,kBAAkB,CAACG,WAAD,CAAlB,CACAI,OAAO,CAACC,GAAR,CAAY,aAAZ,EACH,CAHD,IAGO,CACHD,OAAO,CAACC,GAAR,CAAY,iBAAZ,EACH,CACDC,UAAU,CAAC,UAAU,CAAEZ,gBAAgB,CAAC,KAAD,CAAhB,CAA0B,CAAvC,CAAyC,IAAzC,CAAV,CAlBiB,sDAAH,kBAAZI,CAAAA,YAAY,4CAAlB,CAoBA,mBACI,iBAAS,SAAS,CAAC,YAAnB,wBACI,YAAK,GAAG,CAAEN,KAAK,CAACe,GAAhB,CAAqB,MAAM,CAAE,GAA7B,CAAkC,KAAK,CAAE,GAAzC,EADJ,cAEI,wCACI,oCADJ,cAEI,MAAC,QAAD,EAAU,QAAQ,CAAET,YAApB,wBACI,KAAC,QAAD,CAAU,MAAV,EAAiB,QAAQ,CAAEL,aAA3B,UACKG,eADL,EADJ,cAKI,MAAC,QAAD,CAAU,IAAV,yBACI,KAAC,QAAD,CAAU,IAAV,EAAe,QAAQ,CAAC,MAAxB,oBADJ,cAEI,KAAC,QAAD,CAAU,IAAV,EAAe,QAAQ,CAAC,OAAxB,qBAFJ,GALJ,GAFJ,GAFJ,GADJ,CAkBH","sourcesContent":["import React, { useState, useRef, useEffect} from \"react\";\nimport Button from 'react-bootstrap/Button'\nimport { useHistory } from \"react-router-dom\";\nimport * as FirestoreService from '../firebase/firestore';\nimport Form from 'react-bootstrap/Form';\nimport imageCompression from 'browser-image-compression';\n// import { useAuthState } from 'react-firebase-hooks/auth';\nimport { useCollectionData } from 'react-firebase-hooks/firestore';\nimport DropdownButton from 'react-bootstrap/DropdownButton';\nimport Dropdown from 'react-bootstrap/Dropdown';\n\n// import SignIn from \"./SignIn\";\n\nexport default function Image(props) {\n    const [clickDisabled, setClickDisabled] = useState(false);\n    const [permissionValue, setPermissionValue] = useState(props.permission);\n    const handleSelect = async(eventKey) => {\n        setClickDisabled(true);\n        let permission = false;\n        let toggleValue = \"Private\";\n        if(eventKey === \"false\"){\n            permission = false;\n            toggleValue = \"Private\";\n        } else {\n            permission = true;\n            toggleValue = \"Public\";\n        }\n        let updateProgress = await FirestoreService.updateImagePermission(props.id, permission);\n        if(updateProgress){\n            setPermissionValue(toggleValue);\n            console.log(\"Successful!\");\n        } else {\n            console.log(\"Not Successful!\");\n        }\n        setTimeout(function(){ setClickDisabled(false); }, 5000);\n    }\n    return (\n        <section className=\"Image-Card\">\n            <img src={props.url} height={300} width={300}/>\n            <section>\n                <h3>Permissions:</h3>\n                <Dropdown onSelect={handleSelect}>\n                    <Dropdown.Toggle disabled={clickDisabled}>\n                        {permissionValue}\n                    </Dropdown.Toggle>\n\n                    <Dropdown.Menu>\n                        <Dropdown.Item eventKey=\"true\" >Public</Dropdown.Item>\n                        <Dropdown.Item eventKey=\"false\" >Private</Dropdown.Item>\n                    </Dropdown.Menu>\n                </Dropdown>\n            </section>\n        </section> \n    )\n}\n\n"]},"metadata":{},"sourceType":"module"}