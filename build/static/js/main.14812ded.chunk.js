(this.webpackJsonpimagify=this.webpackJsonpimagify||[]).push([[0],{46:function(e,t,n){},47:function(e,t,n){},59:function(e,t,n){"use strict";n.r(t);var c=n(2),r=n(1),a=n.n(r),s=n(31),i=n.n(s),o=(n(46),n(47),n(20)),u=n(8),l=n(12),j=n(10),b=n.n(j),d=n(21),p=n(25),f=(n(60),n(49),n(61),n(23)),h=n(29);n(51).config();p.a.initializeApp({apiKey:"AIzaSyDlfGYh6VKTQCYtdi7d1egRNQn81unP_oI",authDomain:"imagify-f5874.firebaseapp.com",projectId:"imagify-f5874",storageBucket:"imagify-f5874.appspot.com",messagingSenderId:"945216264228",appId:"1:945216264228:web:786999a75385fe4a5fe0b1",measurementId:"G-GS4S712STZ"});var O=p.a.firestore(),g=p.a.auth(),x=p.a.storage(),m=function(){var e=Object(d.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=new p.a.auth.GoogleAuthProvider,g.signInWithPopup(t);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(d.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.collection("images").add({url:t,uid:g.currentUser.uid,publicPermission:!1});case 3:return e.abrupt("return",!0);case 6:return e.prev=6,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(d.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(n),e.next=4,O.collection("images").doc(t).update({publicPermission:n});case 4:return e.abrupt("return",!0);case 7:return e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),S=n(11);function k(){Object(u.f)();return Object(c.jsx)("div",{className:"Page-home-buttons",children:Object(c.jsx)(S.a,{variant:"outline-primary",size:"lg",onClick:function(){m()},children:"Sign In"})})}var N=n(30);function P(){Object(u.f)();var e=Object(r.useState)([]),t=Object(l.a)(e,2),n=(t[0],t[1]),a=Object(r.useState)([]),s=Object(l.a)(a,2),i=s[0],o=s[1],j=Object(r.useState)(!1),p=Object(l.a)(j,2),f=p[0],h=p[1],O=Object(r.useRef)(null),g=function(){var e=Object(d.a)(b.a.mark((function e(t){var c,r,a,s,i,u;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h(!f),c={maxSizeMB:1,maxWidthOrHeight:1920,useWebWorker:!0},console.log("Started!"),r=[],a=[],s=t.target.files,i=0;case 7:if(!(i<s.length)){e.next=23;break}if(!t.target.files[i]){e.next=20;break}return e.prev=9,e.next=12,Object(N.a)(t.target.files[i],c);case 12:u=e.sent,r.push(u),a.push(t.target.files[i]),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(9),console.log(e.t0);case 20:i++,e.next=7;break;case 23:try{o(r),n(a)}catch(l){console.log(l)}console.log("Files ready for upload!"),h(!f);case 26:case"end":return e.stop()}}),e,null,[[9,17]])})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(d.a)(b.a.mark((function e(){var t,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h(!f),t=b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.ref("images/".concat(i[t].name)).put(i[t]);case 2:n=e.sent,console.log("Uploaded"),n.task.on("state_changed",(function(e){}),(function(e){console.log(e)}),(function(){x.ref("images").child(i[t].name).getDownloadURL().then(function(){var e=Object(d.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(t);case 2:n=e.sent,console.log("Uploaded: "+n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}));case 5:case"end":return e.stop()}}),e)})),c=0;case 3:if(!(c<i.length)){e.next=8;break}return e.delegateYield(t(c),"t0",5);case 5:c++,e.next=3;break;case 8:console.log("Uploaded!"),o([]),n([]),h(!f);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.jsx)("div",{children:Object(c.jsxs)("div",{className:"Page-home-buttons",children:[Object(c.jsx)("input",{style:{display:"none"},type:"file",onChange:g,ref:O}),Object(c.jsx)(S.a,{onClick:function(){O.current.click()},variant:"outline-info",size:"lg",children:"Add Files"}),Object(c.jsx)("span",{className:"Spacer"}),Object(c.jsx)(S.a,{variant:"outline-info",size:"lg",disabled:!1,onClick:m,children:"Upload"})]})})}function w(){var e=Object(f.a)(g),t=Object(l.a)(e,1)[0];return Object(c.jsx)("body",{className:"App-body",children:t?Object(c.jsx)(P,{}):Object(c.jsx)(k,{})})}var I=n(26);function C(e){var t=Object(r.useState)(!1),n=Object(l.a)(t,2),a=n[0],s=n[1],i=Object(r.useState)(e.permission),o=Object(l.a)(i,2),u=o[0],j=o[1],p=function(){var t=Object(d.a)(b.a.mark((function t(n){var c,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s(!0),c=!1,r="Private","false"===n?(c=!1,r="Private"):(c=!0,r="Public"),t.next=6,y(e.id,c);case 6:t.sent?(j(r),console.log("Successful!")):console.log("Not Successful!"),setTimeout((function(){s(!1)}),5e3);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(c.jsxs)("section",{className:"Image-Card",children:[Object(c.jsx)("img",{src:e.url,height:300,width:300}),Object(c.jsxs)("section",{children:[Object(c.jsx)("h3",{className:"Image-Perm-Header",children:"Permissions:"}),Object(c.jsxs)(I.a,{onSelect:p,children:[Object(c.jsx)(I.a.Toggle,{disabled:a,children:u}),Object(c.jsxs)(I.a.Menu,{children:[Object(c.jsx)(I.a.Item,{eventKey:"true",children:"Public"}),Object(c.jsx)(I.a.Item,{eventKey:"false",children:"Private"})]})]})]})]})}function U(e){Object(u.f)();var t=O.collection("images").where(e.querySearchType,"==",e.querySearchValue),n=Object(h.a)(t,{idField:"id"}),r=Object(l.a)(n,2),a=r[0],s=r[1];return Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{className:"Gallery-Heading",children:e.title}),!s&&Object(c.jsx)(z,{gallery:a})]})}function z(e){Object(u.f)();console.log(e.gallery);var t=e.gallery;Object(r.useEffect)((function(){t[0].publicPermission||console.log("private")}),[]);var n=t.map((function(e){var t="Private";return e.publicPermission&&(t="Public"),Object(c.jsx)(C,{url:e.url,permission:t,id:e.id})}));return Object(c.jsx)("div",{className:"Feed",children:n})}function A(){var e=Object(f.a)(g),t=Object(l.a)(e,1)[0];return Object(c.jsx)("body",{className:"App-body",children:t?Object(c.jsx)(U,{querySearchType:"uid",querySearchValue:g.currentUser.uid,title:"Personal Gallery"}):Object(c.jsx)(k,{})})}function G(){var e=Object(f.a)(g),t=Object(l.a)(e,1)[0];return Object(c.jsx)("body",{className:"App-body",children:t?Object(c.jsx)(U,{querySearchType:"publicPermission",querySearchValue:!0,title:"Public Gallery"}):Object(c.jsx)(k,{})})}function T(){var e=Object(u.f)(),t=Object(r.useState)("No User Signed In"),n=Object(l.a)(t,2),a=n[0],s=n[1];return Object(r.useEffect)((function(){g.currentUser?s(g.currentUser.displayName):s("No User Signed In")}),[]),Object(c.jsxs)("section",{className:"HeaderBar",children:[Object(c.jsxs)("div",{className:"LoginInfo",children:[Object(c.jsx)(F,{}),Object(c.jsx)(q,{userName:a})]}),Object(c.jsx)("div",{children:Object(c.jsx)("h1",{children:"Imagify"})}),Object(c.jsxs)("div",{children:[Object(c.jsx)(S.a,{className:"Spacing",onClick:function(){return e.push("/gallery/private")},variant:"outline-info",size:"lg",children:"Personal Gallery"}),Object(c.jsx)(S.a,{className:"Spacing",onClick:function(){return e.push("/gallery/public")},variant:"outline-info",size:"lg",children:"Public Gallery"}),Object(c.jsx)(S.a,{className:"Spacing",onClick:function(){return e.push("/")},variant:"outline-info",size:"lg",children:"Upload Image"})]})]})}function F(){return Object(c.jsx)(S.a,{onClick:function(){g.currentUser?g.signOut():console.log("No user signed in")},variant:"outline-info",size:"lg",children:"Sign Out"})}function q(e){return Object(c.jsxs)("section",{className:"Spacing",children:[Object(c.jsx)("h5",{children:"Signed In As:"}),Object(c.jsx)("h5",{children:e.userName})]})}function B(){return Object(c.jsx)(o.a,{children:Object(c.jsxs)("div",{className:"App",children:[Object(c.jsx)("header",{className:"App-header",children:Object(c.jsx)(T,{})}),Object(c.jsxs)(u.c,{children:[Object(c.jsx)(u.a,{exact:!0,path:"/",children:Object(c.jsx)(w,{})}),Object(c.jsx)(u.a,{exact:!0,path:"/gallery/private",children:Object(c.jsx)(A,{})}),Object(c.jsx)(u.a,{exact:!0,path:"/gallery/public",children:Object(c.jsx)(G,{})})]})]})})}var D=function(){return Object(c.jsx)(B,{})},H=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,66)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))};i.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(D,{})}),document.getElementById("root")),H()}},[[59,1,2]]]);
//# sourceMappingURL=main.14812ded.chunk.js.map