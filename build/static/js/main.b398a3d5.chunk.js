(this.webpackJsonpimagify=this.webpackJsonpimagify||[]).push([[0],{46:function(e,t,n){},47:function(e,t,n){},59:function(e,t,n){"use strict";n.r(t);var r=n(3),c=n(1),a=n.n(c),s=n(31),i=n.n(s),o=(n(46),n(47),n(21)),u=n(8),l=n(13),j=n(10),b=n.n(j),p=n(20),d=n(25),f=(n(60),n(49),n(61),n(23)),h=n(29);n(51).config();d.a.initializeApp({apiKey:"AIzaSyDlfGYh6VKTQCYtdi7d1egRNQn81unP_oI",authDomain:"imagify-f5874.firebaseapp.com",projectId:"imagify-f5874",storageBucket:"imagify-f5874.appspot.com",messagingSenderId:"945216264228",appId:"1:945216264228:web:786999a75385fe4a5fe0b1",measurementId:"G-GS4S712STZ"});var O=d.a.firestore(),x=d.a.auth(),g=d.a.storage(),v=function(){var e=Object(p.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=new d.a.auth.GoogleAuthProvider,x.signInWithPopup(t);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(p.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.collection("images").add({url:t,uid:x.currentUser.uid,publicPermission:!1});case 3:return e.abrupt("return",!0);case 6:return e.prev=6,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(p.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(n),e.next=4,O.collection("images").doc(t).update({publicPermission:n});case 4:return e.abrupt("return",!0);case 7:return e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),S=n(18);function k(){Object(u.f)();return Object(r.jsx)("div",{className:"Page-home-buttons",children:Object(r.jsx)(S.a,{variant:"outline-primary",size:"lg",onClick:function(){v()},children:"Sign In"})})}var w=n(30);function P(){Object(u.f)();var e=Object(c.useState)([]),t=Object(l.a)(e,2),n=(t[0],t[1]),a=Object(c.useState)([]),s=Object(l.a)(a,2),i=s[0],o=s[1],j=Object(c.useState)(!1),d=Object(l.a)(j,2),f=d[0],h=d[1],O=Object(c.useRef)(null),x=function(){var e=Object(p.a)(b.a.mark((function e(t){var r,c,a,s,i,u;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h(!f),r={maxSizeMB:1,maxWidthOrHeight:1920,useWebWorker:!0},console.log("Started!"),c=[],a=[],s=t.target.files,i=0;case 7:if(!(i<s.length)){e.next=23;break}if(!t.target.files[i]){e.next=20;break}return e.prev=9,e.next=12,Object(w.a)(t.target.files[i],r);case 12:u=e.sent,c.push(u),a.push(t.target.files[i]),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(9),console.log(e.t0);case 20:i++,e.next=7;break;case 23:try{o(c),n(a)}catch(l){console.log(l)}console.log("Files ready for upload!"),h(!f);case 26:case"end":return e.stop()}}),e,null,[[9,17]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(p.a)(b.a.mark((function e(){var t,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h(!f),t=b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.ref("images/".concat(i[t].name)).put(i[t]);case 2:n=e.sent,console.log("Uploaded"),n.task.on("state_changed",(function(e){}),(function(e){console.log(e)}),(function(){g.ref("images").child(i[t].name).getDownloadURL().then(function(){var e=Object(p.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(t);case 2:n=e.sent,console.log("Uploaded: "+n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}));case 5:case"end":return e.stop()}}),e)})),r=0;case 3:if(!(r<i.length)){e.next=8;break}return e.delegateYield(t(r),"t0",5);case 5:r++,e.next=3;break;case 8:console.log("Uploaded!"),o([]),n([]),h(!f);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsx)("div",{children:Object(r.jsxs)("div",{className:"Page-home-buttons",children:[Object(r.jsx)("input",{style:{display:"none"},type:"file",onChange:x,ref:O}),Object(r.jsx)(S.a,{onClick:function(){O.current.click()},variant:"outline-info",size:"lg",children:"Add Files"}),Object(r.jsx)("span",{className:"Spacer"}),Object(r.jsx)(S.a,{variant:"outline-info",size:"lg",disabled:!1,onClick:v,children:"Upload"})]})})}function I(){var e=Object(f.a)(x),t=Object(l.a)(e,1)[0];return Object(r.jsx)("body",{className:"App-body",children:t?Object(r.jsx)(P,{}):Object(r.jsx)(k,{})})}var A=n(26);function N(e){var t=Object(c.useState)(!1),n=Object(l.a)(t,2),a=n[0],s=n[1],i=Object(c.useState)(e.permission),o=Object(l.a)(i,2),u=o[0],j=o[1],d=function(){var t=Object(p.a)(b.a.mark((function t(n){var r,c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s(!0),r=!1,c="Private","false"===n?(r=!1,c="Private"):(r=!0,c="Public"),t.next=6,y(e.id,r);case 6:t.sent?(j(c),console.log("Successful!")):console.log("Not Successful!"),setTimeout((function(){s(!1)}),5e3);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(r.jsxs)("section",{className:"Image-Card",children:[Object(r.jsx)("img",{src:e.url,height:300,width:300}),Object(r.jsxs)("section",{children:[Object(r.jsx)("h3",{children:"Permissions:"}),Object(r.jsxs)(A.a,{onSelect:d,children:[Object(r.jsx)(A.a.Toggle,{disabled:a,children:u}),Object(r.jsxs)(A.a.Menu,{children:[Object(r.jsx)(A.a.Item,{eventKey:"true",children:"Public"}),Object(r.jsx)(A.a.Item,{eventKey:"false",children:"Private"})]})]})]})]})}function T(e){Object(u.f)();var t=O.collection("images").where(e.querySearchType,"==",e.querySearchValue),n=Object(h.a)(t,{idField:"id"}),c=Object(l.a)(n,2),a=c[0],s=c[1];return Object(r.jsx)("div",{children:!s&&Object(r.jsx)(C,{gallery:a})})}function C(e){Object(u.f)();console.log(e.gallery);var t=e.gallery;Object(c.useEffect)((function(){t[0].publicPermission||console.log("private")}),[]);var n=t.map((function(e){var t="Private";return e.publicPermission&&(t="Public"),Object(r.jsx)(N,{url:e.url,permission:t,id:e.id})}));return Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:"PRIVATE GALLERY"}),n]})}function F(){var e=Object(f.a)(x),t=Object(l.a)(e,1)[0];return Object(r.jsx)("body",{className:"App-body",children:t?Object(r.jsx)(T,{querySearchType:"uid",querySearchValue:x.currentUser.uid}):Object(r.jsx)(k,{})})}function U(){var e=Object(f.a)(x),t=Object(l.a)(e,1)[0];return Object(r.jsx)("body",{className:"App-body",children:t?Object(r.jsx)(T,{querySearchType:"publicPermission",querySearchValue:!0}):Object(r.jsx)(k,{})})}function q(){return Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)("header",{className:"App-header",children:Object(r.jsx)("h1",{children:"Imagify"})}),Object(r.jsx)(o.a,{children:Object(r.jsxs)(u.c,{children:[Object(r.jsx)(u.a,{exact:!0,path:"/",children:Object(r.jsx)(I,{})}),Object(r.jsx)(u.a,{exact:!0,path:"/gallery/private",children:Object(r.jsx)(F,{})}),Object(r.jsx)(u.a,{exact:!0,path:"/gallery/public",children:Object(r.jsx)(U,{})})]})})]})}var z=function(){return Object(r.jsx)(q,{})},G=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,66)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),r(e),c(e),a(e),s(e)}))};i.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(z,{})}),document.getElementById("root")),G()}},[[59,1,2]]]);
//# sourceMappingURL=main.b398a3d5.chunk.js.map