(this.webpackJsonpimagify=this.webpackJsonpimagify||[]).push([[0],{46:function(e,t,n){},47:function(e,t,n){},59:function(e,t,n){"use strict";n.r(t);var c=n(2),r=n(1),a=n.n(r),i=n(29),s=n.n(i),u=(n(46),n(47),n(21)),l=n(8),o=n(11),j=n(10),b=n.n(j),d=n(20),p=n(24),f=(n(60),n(49),n(61),n(22)),h=n(34);n(51).config();p.a.initializeApp({apiKey:"AIzaSyDlfGYh6VKTQCYtdi7d1egRNQn81unP_oI",authDomain:"imagify-f5874.firebaseapp.com",projectId:"imagify-f5874",storageBucket:"imagify-f5874.appspot.com",messagingSenderId:"945216264228",appId:"1:945216264228:web:786999a75385fe4a5fe0b1",measurementId:"G-GS4S712STZ"});var O=p.a.firestore(),g=p.a.auth(),x=p.a.storage(),m=function(){var e=Object(d.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=new p.a.auth.GoogleAuthProvider,g.signInWithPopup(t);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(d.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.collection("images").add({url:t,uid:g.currentUser.uid,publicPermission:!1});case 3:return e.abrupt("return",!0);case 6:return e.prev=6,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(d.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.collection("images").doc(t).update({publicPermission:n});case 3:return e.abrupt("return",!0);case 6:return e.prev=6,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),S=n(13);function P(){Object(l.f)();return Object(c.jsx)("div",{className:"Page-home-buttons",children:Object(c.jsx)(S.a,{variant:"outline-primary",size:"lg",onClick:function(){m()},children:"Sign In"})})}var k=n(40);function N(){var e=Object(r.useState)([]),t=Object(o.a)(e,2),n=(t[0],t[1]),a=Object(r.useState)([]),i=Object(o.a)(a,2),s=i[0],u=i[1],l=Object(r.useState)(!1),j=Object(o.a)(l,2),p=j[0],f=j[1],h=Object(r.useRef)(null),O=function(){var e=Object(d.a)(b.a.mark((function e(t){var c,r,a,i,s,l;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f(!0),c={maxSizeMB:1,maxWidthOrHeight:1920,useWebWorker:!0},console.log("Started!"),r=[],a=[],i=t.target.files,s=0;case 7:if(!(s<i.length)){e.next=23;break}if(!t.target.files[s]){e.next=20;break}return e.prev=9,e.next=12,Object(k.a)(t.target.files[s],c);case 12:l=e.sent,r.push(l),a.push(t.target.files[s]),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(9),console.log(e.t0);case 20:s++,e.next=7;break;case 23:try{u(r),n(a)}catch(o){console.log(o)}console.log("Files ready for upload!"),f(!1);case 26:case"end":return e.stop()}}),e,null,[[9,17]])})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(d.a)(b.a.mark((function e(){var t,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f(!0),t=b.a.mark((function e(t){var n,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=g.currentUser.uid+"-"+s[t].name,console.log(n),e.next=4,x.ref("images/".concat(n)).put(s[t]);case 4:c=e.sent,console.log("Uploaded"),c.task.on("state_changed",(function(e){}),(function(e){console.log(e)}),(function(){x.ref("images").child(n).getDownloadURL().then(function(){var e=Object(d.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(t);case 2:n=e.sent,console.log("Uploaded: "+n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}));case 7:case"end":return e.stop()}}),e)})),c=0;case 3:if(!(c<s.length)){e.next=8;break}return e.delegateYield(t(c),"t0",5);case 5:c++,e.next=3;break;case 8:console.log("Uploaded!"),u([]),n([]),f(!1);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.jsx)("div",{children:Object(c.jsxs)("div",{className:"Page-home-buttons",children:[Object(c.jsx)("input",{style:{display:"none"},multiple:!0,type:"file",onChange:O,ref:h}),Object(c.jsx)(S.a,{onClick:function(){h.current.click()},variant:"outline-info",disabled:p,size:"lg",children:"Add Files"}),Object(c.jsx)("span",{className:"Spacer"}),Object(c.jsx)(S.a,{variant:"outline-info",size:"lg",disabled:p,onClick:m,children:"Upload"})]})})}function w(){var e=Object(f.a)(g),t=Object(o.a)(e,1)[0];return Object(c.jsx)("body",{className:"App-body",children:t?Object(c.jsx)(N,{}):Object(c.jsx)(P,{})})}var I=n(25);function U(e){return Object(c.jsxs)("section",{className:"Image-Card",children:[Object(c.jsx)("img",{src:e.url,height:300,width:300}),!e.publicPage&&Object(c.jsx)(C,{id:e.id,permission:e.permission})]})}function C(e){var t=Object(r.useState)(!1),n=Object(o.a)(t,2),a=n[0],i=n[1],s=Object(r.useState)(e.permission),u=Object(o.a)(s,2),l=u[0],j=u[1],p=function(){var t=Object(d.a)(b.a.mark((function t(n){var c,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i(!0),c=!1,r="Private","false"===n?(c=!1,r="Private"):(c=!0,r="Public"),t.next=6,y(e.id,c);case 6:t.sent?(j(r),console.log("Successful!")):console.log("Not Successful!"),setTimeout((function(){i(!1)}),5e3);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(c.jsxs)("section",{children:[Object(c.jsx)("h3",{className:"Image-Perm-Header",children:"Permissions:"}),Object(c.jsxs)(I.a,{onSelect:p,children:[Object(c.jsx)(I.a.Toggle,{disabled:a,children:l}),Object(c.jsxs)(I.a.Menu,{children:[Object(c.jsx)(I.a.Item,{eventKey:"true",children:"Public"}),Object(c.jsx)(I.a.Item,{eventKey:"false",children:"Private"})]})]})]})}function z(e){var t=O.collection("images").where(e.querySearchType,"==",e.querySearchValue),n=Object(h.a)(t,{idField:"id"}),r=Object(o.a)(n,2),a=r[0],i=r[1];return Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{className:"Gallery-Heading",children:e.title}),!i&&Object(c.jsx)(A,{gallery:a,publicPage:e.publicPage})]})}function A(e){var t=e.gallery.map((function(t){var n="Private";return t.publicPermission&&(n="Public"),Object(c.jsx)(U,{url:t.url,permission:n,id:t.id,publicPage:e.publicPage})}));return Object(c.jsx)("div",{className:"Feed",children:t})}function G(){var e=Object(f.a)(g),t=Object(o.a)(e,1)[0];return Object(c.jsx)("body",{className:"App-body",children:t?Object(c.jsx)(z,{publicPage:!1,querySearchType:"uid",querySearchValue:g.currentUser.uid,title:"Personal Gallery"}):Object(c.jsx)(P,{})})}function T(){var e=Object(f.a)(g);Object(o.a)(e,1)[0];return Object(c.jsx)("body",{className:"App-body",children:Object(c.jsx)(z,{publicPage:!0,querySearchType:"publicPermission",querySearchValue:!0,title:"Public Gallery"})})}function F(){var e=Object(l.f)(),t=Object(f.a)(g),n=Object(o.a)(t,1)[0],a=Object(r.useState)("No User Signed In"),i=Object(o.a)(a,2),s=i[0],u=i[1],j=function(){g.currentUser?u(g.currentUser.displayName):u("No User Signed In")};Object(r.useEffect)((function(){j()}),[j,n]);return Object(c.jsxs)("section",{className:"HeaderBar",children:[Object(c.jsxs)("div",{className:"LoginInfo",children:[Object(c.jsx)(q,{}),Object(c.jsx)(B,{userName:s})]}),Object(c.jsx)("div",{children:Object(c.jsx)("h1",{children:"Imagify"})}),Object(c.jsxs)("div",{children:[Object(c.jsx)(S.a,{className:"Spacing",onClick:function(){e.push("/gallery/private")},variant:"outline-info",size:"lg",children:"Personal Gallery"}),Object(c.jsx)(S.a,{className:"Spacing",onClick:function(){e.push("/gallery/public")},variant:"outline-info",size:"lg",children:"Public Gallery"}),Object(c.jsx)(S.a,{className:"Spacing",onClick:function(){e.push("/")},variant:"outline-info",size:"lg",children:"Upload Image"})]})]})}function q(){return g.currentUser&&Object(c.jsx)(S.a,{onClick:function(){g.currentUser?g.signOut():console.log("No user signed in")},variant:"outline-info",size:"lg",children:"Sign Out"})}function B(e){return Object(c.jsxs)("section",{className:"Spacing",children:[Object(c.jsx)("h5",{children:"Signed In As:"}),Object(c.jsx)("h5",{children:e.userName})]})}function D(){return Object(c.jsx)(u.a,{children:Object(c.jsxs)("div",{className:"App",children:[Object(c.jsx)("header",{className:"App-header",children:Object(c.jsx)(F,{})}),Object(c.jsxs)(l.c,{children:[Object(c.jsx)(l.a,{exact:!0,path:"/",children:Object(c.jsx)(w,{})}),Object(c.jsx)(l.a,{exact:!0,path:"/gallery/private",children:Object(c.jsx)(G,{})}),Object(c.jsx)(l.a,{exact:!0,path:"/gallery/public",children:Object(c.jsx)(T,{})})]})]})})}var H=function(){return Object(c.jsx)(D,{})},K=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,65)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),a(e),i(e)}))};s.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(H,{})}),document.getElementById("root")),K()}},[[59,1,2]]]);
//# sourceMappingURL=main.8395e3d4.chunk.js.map